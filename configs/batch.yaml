# configs/batch.yaml
paths:
  catalog_path: "data/catalogs/essem_freq_kappa_catalog_22A_49G.json"
  hyperfine_path: "data/hyperfine/nv-2.txt"
  fits_path: "data/fits/2025_11_17-09_49_42-sample_204nv_s1-fcc605.txt"

  # outputs
  out_dir: "outputs/sim_batch"
  out_prefix: "sample_204nv"

batch:
  num_spectra: 15          # number of NVs to simulate
  R: 1                     # realizations per NV
  rng_seed: 20251102

  # how to choose which NVs from the fits
  contrast_min: 0.10
  contrast_max: 2.0
  t2_threshold_us: 2000.0
  sort_by: "chi2"          # chi2 | contrast | t2

sim:
  # shared sim settings for every NV
  tau_range_us: [0.0, 100.0]
  n_tau: 600
  B_vec_G: [-41.5785, -32.7715, -27.5799]

  abundance_fraction: 0.011
  num_spins: 1
  selection_mode: "top_kappa"
  reuse_present_mask: true
  distance_cutoff_A: 22.0
  f_band_kHz: [10.0, 1500.0]

fine:
  # either: "from_fit" (use each NV’s fitted fine params)
  # or: "fixed" (use the same fine params for all NVs)
  mode: "from_fit"

  fixed_params:
    baseline: 0.6
    comb_contrast: 0.45
    revival_time_us: 37.0
    width0_us: 6.0
    T2_ms: 0.08
    T2_exp: 1.2
    amp_taper_alpha: 0.0
    width_slope: 0.0
    revival_chirp: 0.0
    osc_amp: 0.0
    osc_f0: 0.0
    osc_f1: 0.0
    osc_phi0: 0.0
    osc_phi1: 0.0

plot:
  show_env: false
  show_env_times_comb: false
  max_site_rows: 8
  save_per_nv: true

